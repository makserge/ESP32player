<HTML>
<HEAD>
    <META NAME="GENERATOR" CONTENT="srchtml2html.pl (Linux)">
    <META NAME="DATE" CONTENT="Wed Jul 26 12:47:20 2000">
    <META NAME="DESCRIPTION" CONTENT="Данная страница содержит детальное описание проекта CYR-RFX (Cyrillic Raster Fonts for X11)">
    <META NAME="KEYWORDS" CONTENT="кириллические шрифты, русские шрифты, украинские шрифты, евро, x11, x-window, кои, кои8, koi-8, koi8-1, koi8-ru, koi8-u, windows-1251, iso8859-5, mac-cyrillic, ibm-cp866, dos, winlatin-1, iso8859-15">
    <TITLE>README-файл проекта CYR-RFX (Cyrillic Raster Fonts for X11)</TITLE>
</HEAD>
<BODY TEXT="#000000" LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000">
<H1 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">Проект CYR-RFX -- README</FONT></H1>
<BR CLEAR=all>






<TABLE WIDTH=50% ALIGN=right><TR><TD ALIGN=right><NOBR><SMALL><I>Эта работа посвящается Мистеру Труди --<WBR>образцу упорства и настойчивости</I></SMALL></NOBR></TD></TR></TABLE><BR CLEAR=all>

<BR CLEAR=all><H2 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">Оглавление&nbsp;</FONT></H2>
<H2>&sect;1.&nbsp;<A HREF="#S_1">Краткое описание</A></H2>
<DL COMPACT>
<DT>1.1.<DD><A HREF="#S_1.1">Что такое CYR-RFX?</A>
<DT>1.2.<DD><A HREF="#S_1.2">Где можно найти последнюю версию шрифтов CYR-RFX?</A>
<DT>1.3.<DD><A HREF="#S_1.3">Как установить шрифты CYR-RFX?</A>
<DT>1.4.<DD><A HREF="#S_1.4">Как использовать шрифты CYR-RFX в приложениях?</A>
<DT>1.5.<DD><A HREF="#S_1.5">Как расшифровывается "CYR-RFX"?</A>
<DT>1.6.<DD><A HREF="#S_1.6">Каковы цели проекта CYR-RFX?</A>
<DT>1.7.<DD><A HREF="#S_1.7">Уже существуют кириллические шрифты для X &#40;например, Cronyx&#41;, зачем же нужен CYR-RFX?</A>
<DT>1.8.<DD><A HREF="#S_1.8">Сейчас существуют растризаторы TrueType шрифтов для X, зачем же нужен CYR-RFX?</A>
<DT>1.9.<DD><A HREF="#S_1.9">Какие шрифты входят в проект CYR-RFX?</A>
<DT>1.10.<DD><A HREF="#S_1.10">Какой набор символов и какие кодировки присутствуют в CYR-RFX?</A>
<DT>1.11.<DD><A HREF="#S_1.11">Какие имена имеют шрифты в CYR-RFX?</A>
<DT>1.12.<DD><A HREF="#S_1.12">Как выбирались имена отдельных символов в шрифте, указываемые после ключевого слова STARTCHAR?</A>
<DT>1.13.<DD><A HREF="#S_1.13">Как создаются шрифты CYR-RFX?</A>
<DT>1.14.<DD><A HREF="#S_1.14">По каким принципам создаются кириллические символы в CYR-RFX?</A>
<DT>1.15.<DD><A HREF="#S_1.15">Почему ВЫ занимаетесь кириллизацией?  Вы специалист по шрифтам?</A>
</DL>
<H2>&sect;2.&nbsp;<A HREF="#S_2">Использование шрифтов CYR-RFX в приложениях</A></H2>
<DL COMPACT>
</DL>
<H2>&sect;3.&nbsp;<A HREF="#S_3">Принципы создания кириллических символов в CYR-RFX</A></H2>
<DL COMPACT>
</DL>
<H2>&nbsp;&nbsp;&nbsp;<A HREF="#S_BIBL">Литература</A></H2>
<DL COMPACT>
</DL>

<BR CLEAR=all><HR WIDTH=90% SIZE=4>
<A NAME="S_1"><BR CLEAR=all><H2 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.&nbsp;Краткое описание</FONT></H2>




<A NAME="S_1.1"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.1.&nbsp;Что такое CYR-RFX?</FONT></H3>
CYR-RFX -- это набор кириллических растровых шрифтов для системы
X-Window.



<A NAME="S_1.2"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.2.&nbsp;Где можно найти последнюю версию шрифтов CYR-RFX?</FONT></H3>
Последняя версия всегда доступна на домашней странице проекта CYR-RFX
по адресу

<BLOCKQUOTE><A HREF="http://www.inp.nsk.su/~bolkhov/files/fonts/cyr-rfx/00index.ru.html">http://www.inp.nsk.su/~bolkhov/files/fonts/cyr-rfx/00index.ru.html</A></BLOCKQUOTE>

<P>Она также доступна по ftp по адресу

<BLOCKQUOTE><A HREF="ftp://ftp.inp.nsk.su/pub/BINP/X11/fonts/cyr-rfx/00index.ru.html">ftp://ftp.inp.nsk.su/pub/BINP/X11/fonts/cyr-rfx/00index.ru.html</A></BLOCKQUOTE>



<A NAME="S_1.3"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.3.&nbsp;Как установить шрифты CYR-RFX?</FONT></H3>
В точности так же, как и любые другие шрифты для X.  Детальные
инструкции содержатся в файле <A
HREF="INSTALL.ru.txt">INSTALL.ru.txt</A>.



<A NAME="S_1.4"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.4.&nbsp;Как использовать шрифты CYR-RFX в приложениях?</FONT></H3>
Рецепты для нескольких часто используемых приложений приведены во
втором разделе.


<A NAME="S_1.5"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.5.&nbsp;Как расшифровывается "CYR-RFX"?</FONT></H3>

<P>"<I>CYR-RFX</I>" расшифровывается как CYRillic Raster Fonts for X.




<A NAME="S_1.6"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.6.&nbsp;Каковы цели проекта CYR-RFX?</FONT></H3>
<P>Целью CYR-RFX является создание набора качественных кириллических
версий растровых шрифтов для X-Window.

<P>Первоначально ставилась задача создать русифицированные версии
нескольких шрифтов семейства LucidaTypewriter для использования в xterm
и текстовых редакторах.

<P>Затем задача была расширена -- создание такого набора шрифтов,
который покрывал бы большинство приложений X-Window.  В качестве
основных при этом считаются: xterm, текстовые редакторы, Netscape, XV,
LyX, window manager'ы и GUI (fvwm/<WBR>fvwm2/<WBR>AnotherLevel,
AfterStep, KDE, GNOME), интерфейсы Motif, Athena, Athena3D, Qt и
XForms.

<P>(Требуемые шрифты выяснялись очень простым способом:
"<TT>grep&nbsp;-i&nbsp;font</TT>" по всем файлам в директориях
<TT>/etc/X11</TT> и <TT>/usr/X11R6/lib/X11/app-defaults</TT>, а также при
помощи <TT>strings|less</TT> по исполняемым файлам программ и динамическим
библиотекам.)


<A NAME="S_1.7"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.7.&nbsp;Уже существуют кириллические шрифты для X &#40;например, Cronyx&#41;, зачем же нужен CYR-RFX?</FONT></H3>
<P>Одной из целей CYR-RFX является создание <I>аккуратных кириллических
версий стандартных шрифтов X</I>.

<P>Пакет Cronyx же (директория <TT>fonts/cyrillic</TT> в дистрибутиве
XFree86) во-первых, содержит шрифты, взятые скорее из Windows 3.x (см.
[<A HREF="#bib_CRONYX">CRONYX</A>]), а не из X, во-вторых, эти шрифты -- не самые
эстетичные и приятные для глаза, а в-третьих, метрики в этих шрифтах
зачастую неверны, так что обычно текст, состоящий из разных шрифтов
(как вперемежку Cronyx/ISO8859-1, так и только Cronyx) выглядит
попросту "коряво". (Это обусловлено неправильным значением
<TT>FONT_ASCENT</TT>, а также несоответствием высот символов в разных
шрифтах с одинаковым значением <TT>PIXEL_SIZE</TT> -- например, в
шрифтах courier-medium-r-normal--14 и times-medium-r-normal--14.) 

<P>Автор далек от того, чтобы "поливать грязью" шрифты Cronyx -- в свое
время они были единственным вариантом для X, и их значение трудно
переоценить, но в настоящее время хочется лучшего.

<P>Второй известный автору набор кириллических шрифтов -- условно
назовем его "75dpi.koi8-1" [<A HREF="#bib_75DPI_KOI8">75DPI_KOI8</A>] -- сделан путем
добавления русских символов в стандартные шрифты. Но он, во-первых, не
содержит шрифтов Lucida/<WBR>LucidaTypewriter и моноширинных из
<TT>misc/</TT>, а во-вторых, начертания символов зачастую не соответствуют
принятому в соответствующем русском шрифте (используемом в издательском
деле). Кроме того, этот набор шрифтов в общем-то "анонимный" -- по
крайней мере, в имеющихся у автора вариантах дистрибутива отсутствуют
какие-либо ссылки на создателей.

<A NAME="S_1.8"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.8.&nbsp;Сейчас существуют растризаторы TrueType шрифтов для X, зачем же нужен CYR-RFX?</FONT></H3>

<P>Для больших разрешений векторные шрифты (TrueType и PostScript)
являются идеальным решением, для малых же разрешений (xterm, текстовые
редакторы, WWW, заголовки окон и т.д.) лучше подходят точно
рассчитанные и подогнанные вручную растровые шрифты.  Именно они
применяются в этих целях как в X, так и в MS Windows и в MacOS.

<P>Кроме того, наиболее распространенные TrueType-шрифты -- это те, что
поставляются в составе MS Windows и входят в MS Fontpack
[<A HREF="#bib_MS_FONTPACK">MS_FONTPACK</A>].  Но, несмотря на "бесплатность", они не
являются свободно распространяемыми и практически неприемлемы для
нормального использования в Unix, т.к., к примеру, не могут быть
включены в дистрибутивы Unix вследствие поставляемого формата
(.exe-файл) и весьма иезуитской лицензии (см. [<A HREF="#bib_MS_EULA">MS_EULA</A>]).



<A NAME="S_1.9"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.9.&nbsp;Какие шрифты входят в проект CYR-RFX?</FONT></H3>

<P>В настоящий момент кириллизированы все <FONT FACE="arial, helvetica">iso8859-1</FONT>-шрифты из
<TT>misc/</TT> и шрифты семейств Lucida, LucidaTypewriter, Times,
Helvetica и Courier из <TT>75dpi/</TT>; семейство NewCenturySchoolbook и
шрифты <TT>100dpi/</TT> держится в уме на будущее.  Такой выбор шрифтов
обусловлен в основном тем, что они наиболее часто используются.



<A NAME="S_1.10"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.10.&nbsp;Какой набор символов и какие кодировки присутствуют в CYR-RFX?</FONT></H3>
<P>Первоначально предполагалось сделать символы кодировки <FONT FACE="arial, helvetica">koi8-1</FONT>
[<A HREF="#bib_KOI81">KOI81</A>] (включая "Евро"
[<A HREF="#bib_EURO_A">EURO_A</A>,<A HREF="#bib_EURO_H">EURO_H</A>,<A HREF="#bib_EURO_M">EURO_M</A>] и "Рубль"), затем
были включены украинские и белорусские символы из <FONT FACE="arial, helvetica">koi8-ru</FONT>
[<A HREF="#bib_KOI8RU">KOI8RU</A>], и, наконец, в качестве менее необходимых,
кириллические символы из <FONT FACE="arial, helvetica">windows-1251</FONT>/WGL4
[<A HREF="#bib_WIN1251">WIN1251</A>,<A HREF="#bib_WGL4">WGL4</A>].  Автор не ставит перед собой 
задачу сделать все кириллические символы, присутствующие в стандарте
Unicode -- лишь самые используемые. 

<P>В шрифты <TT>misc/</TT> и <TT>75dpi/lut[RB]S{08,19,24}.bdf</TT> были
добавлены символы пунктуации, присутствующие в <FONT FACE="arial, helvetica">koi8-1</FONT> и
стандартном наборе фирмы Adobe:

<BLOCKQUOTE>
<TT>
        dagger, daggerdbl, guilsinglleft, guilsinglright, emdash,
        endash, ellipsis, quotesinglbase, quotedblbase, grave,
        quotesingle, quotedblleft, quotedblright, tilde, florin,
        perthousand, bullet, trademark, circumflex; OE, oe, Scaron,
        scaron, Zcaron, zcaron, Ydieresis.
</TT>
</BLOCKQUOTE>

<P>В остальных шрифтах они уже содержались в качестве unencoded glyphs.

<P>В моноширинные шрифты LucidaTypewriter и Courier были добавлены
символы псевдографики в диапазоне <I>0x00-0x1F</I>, чтобы их можно было
использовать в xterm и подобных программах (автор пользуется шрифтом
<TT>lutRS12</TT>).

<P>В некоторые шрифты LucidaTypewriter добавлены также и "изображения"
управляющих символов из диапазона <I>0x00-0x1F</I> плюс символа 
<I>0x7F</I> (<TT>delete</TT>).  Цель -- чтобы в программах, которые
отображают текст, не интерпретируя управляющие символы (текстовые
редакторы -- к примеру, xfte), а также в xterm при отображении символов
из этого диапазона, не имеющих специального назначения, отображалось
что-нибудь -- вместо абсолютно ничего. 

<P>В стандартных шрифтах Lucida и LucidaTypewriter, а также в
большинстве шрифтов <TT>misc/</TT> свойство <TT>DEFAULT_CHAR</TT>
[<A HREF="#bib_BDF">BDF</A>,<A HREF="#bib_XLFD">XLFD</A>] имеет значение <I>0</I>.  Поэтому в
моноширинные шрифты LucidaTypewriter и

<TT>misc/{10x20,<WBR>12x24,<WBR>6x10,<WBR>6x13B,<WBR>7x14,<WBR>7x14B,<WBR>8x13,<WBR>8x13B,<WBR>8x16,<WBR>9x15,<WBR>9x15B}</TT>

был добавлен символ <I>0x00</I> в виде заполненного прямоугольника (в
остальных <TT>misc/</TT> он уже был).  В шрифтах же Lucida (точнее, во
всех, с <TT>DEFAULT_CHAR=0</TT> и отсутствующим символом <I>0x00</I>)
значение <TT>DEFAULT_CHAR</TT> было изменено на <TT>32</TT>, чтобы
несуществующие символы  отображались как пробел (изначально в Lucida*
из X11R6.3 отсутствовал даже символ <I>0xA0</I> (nbsp), что неверно).

<P>В настоящий момент присутствуют следующие кодировки:

<CENTER>
<TABLE BORDER=0 CELLSPACING=2 CELLPADDING=4>
  <TR VALIGN=top BGCOLOR=#B0B0B0><TH>Кодировка</TH><TH>Состав</TH></TR>
  <TR VALIGN=top BGCOLOR=#D0D0D0><TD><FONT FACE="arial, helvetica">koi8-1</FONT>&nbsp;</TD><TD>полностью</TD></TR>
  <TR VALIGN=top BGCOLOR=#D0D0D0><TD><FONT FACE="arial, helvetica">koi8-ru</FONT>&nbsp;</TD><TD>буквы, одиночная псевдографика и часть спецсимволов</TD></TR>
  <TR VALIGN=top BGCOLOR=#D0D0D0><TD><FONT FACE="arial, helvetica">windows-1251</FONT>&nbsp;</TD><TD>полностью</TD></TR>
  <TR VALIGN=top BGCOLOR=#D0D0D0><TD><FONT FACE="arial, helvetica">ibm-cp866</FONT>&nbsp;</TD><TD>буквы, одиночная псевдографика и часть спецсимволов</TD></TR>
  <TR VALIGN=top BGCOLOR=#D0D0D0><TD><FONT FACE="arial, helvetica">iso8859-5</FONT>&nbsp;</TD><TD>полностью</TD></TR>
  <TR VALIGN=top BGCOLOR=#D0D0D0><TD><FONT FACE="arial, helvetica">mac-cyrillic</FONT>&nbsp;</TD><TD>без специфичных для Mac символов типа "Delta" и "infinity"</TD></TR>
  <TR VALIGN=top BGCOLOR=#D0D0D0><TD><FONT FACE="arial, helvetica">winlatin-1</FONT>&nbsp;</TD><TD>полностью</TD></TR>
  <TR VALIGN=top BGCOLOR=#D0D0D0><TD><FONT FACE="arial, helvetica">iso8859-15</FONT>&nbsp;</TD><TD>полностью</TD></TR>
</TABLE>
</CENTER>

<P>Кодировка <FONT FACE="arial, helvetica">winlatin-1</FONT> (она же <FONT FACE="arial, helvetica">cp-1252</FONT>, она же
<FONT FACE="arial, helvetica">windows-1252</FONT>) является надмножеством  <FONT FACE="arial, helvetica">iso8859-1</FONT>, но
содержит дополнительные символы в позициях <I>0x80-0x9F</I>.  Иногда
web-страницы, сделанные под Windows в <FONT FACE="arial, helvetica">cp-1252</FONT>, передаются с
заголовком <TT>charset=iso-8859-1</TT> [<A HREF="#bib_CZY_CP1252">CZY_CP1252</A>].

<P>Во всех кодировках диапазон <I>0-127</I> совпадает с
<FONT FACE="arial, helvetica">ISO8859-1</FONT>.

<P>Поскольку готовые файлы со шрифтами генерируются программно, легко
могут быть добавлены другие кодировки.


<A NAME="S_1.11"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.11.&nbsp;Какие имена имеют шрифты в CYR-RFX?</FONT></H3>
<P>Все шрифты имеют те же имена, что и стандартные, с несколькими
отличиями. 

<OL>

<LI>XLFD-суффикс <TT>rgstry-encdng</TT> "ISO8859-1" заменяется
на тот, что соответствует конкретной кодировке (например, "koi8-1").


<LI>Кроме того, для шрифтов в кодировках <FONT FACE="arial, helvetica">koi8-1</FONT>, <FONT FACE="arial, helvetica">koi8-ru</FONT>,
<FONT FACE="arial, helvetica">winlatin-1</FONT> и <FONT FACE="arial, helvetica">iso8859-15</FONT> автоматически генерируются
псевдонимы с rgstry-encdng "koi8-r", "koi8-u", "iso8859-1" и
"iso8859-1" соответственно.  У этих псевдонимов к полю <TT>fndry</TT>
добавляется название исходной кодировки.  К примеру, для шрифта


<P><BLOCKQUOTE>-adobe-times-medium-r-normal--14-140-75-75-p-74-winlatin-1</BLOCKQUOTE>

создается псевдоним

<P><BLOCKQUOTE>-adobe_winlatin_1-times-medium-r-normal--14-140-75-75-p-74-iso8859-1</BLOCKQUOTE>

<LI>И, наконец, псевдонимы, имевшиеся в оригинальных файлах
<TT>fonts.alias</TT>, сохранены (естественно, с корректной модификацией имени). 
Так, к примеру, <TT>6x13</TT> и <TT>fixed</TT> "указывают" на

<P><BLOCKQUOTE>-misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-koi8-1</BLOCKQUOTE>

</OL>

<P>Такой подход позволяет максимально упростить кириллизацию
большинства стандартных программ, которые обычно используют или шаблоны
без указания кодировки, или псевдонимы "7x14", "fixed" и подобные.  В
большинстве случаев достаточно поместить директории с кириллическими
шрифтами в начало FontPath, и они автоматически будут использоваться
вместо <FONT FACE="arial, helvetica">iso8859-1</FONT>.


<A NAME="S_1.12"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.12.&nbsp;Как выбирались имена отдельных символов в шрифте, указываемые после ключевого слова STARTCHAR?</FONT></H3>

<P>В основном использовались стандартные имена фирмы Adobe
[<A HREF="#bib_AGL">AGL</A>]. Это относится символам из диапазона <I>0x20-0x7E</I>,
кириллическим символам (имена <TT>afiiNNNNN</TT>), символам из диапазона
<I>0xA0-0xBF</I> кодировки <FONT FACE="arial, helvetica">ISO8859-1</FONT>, символу "<TT>Euro</TT>", а
также к дополнительным символам пунктуации. Для символа "номер" было
взято имя <!--"<TT>numero</TT>" вместо малопонятного -->"<TT>afii61352</TT>",
для символа "рубль" -- "<TT>rouble</TT>".  Символы псевдографики получили
имена <TT>ldXXXXX</TT> (Line Drawing) по примеру шрифта
<TT>75dpi/tech14.bdf</TT> (-DEC-Terminal-*-DEC-DECtech), символ
<I>0x00</I> -- имя "<TT>null</TT>", а остальные символы из диапазона
<I>0x00-0x1F</I> получили имена "<TT>ctrlX</TT>", где "X" -- символ с тем
же кодом плюс 0x40. Символ <I>0x7F</I> получил имя "<TT>delete</TT>". 
Символ неразбивающего пробела <I>0xA0</I> получил имя "<TT>space</TT>" в
соответствии с [<A HREF="#bib_AGL">AGL</A>].

<P>Символы, не имеющие стандартных имен Adobe, в соответствиии с
[<A HREF="#bib_UGN">UGN</A>] получили имена вида <TT>uniXXXX</TT>, где "XXXX" --
шестнадцатиричный Unicode-код символа.



<A NAME="S_1.13"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.13.&nbsp;Как создаются шрифты CYR-RFX?</FONT></H3>
<P>Шрифты создаются в два приема.

<P>Сначала берется стандартный .bdf-шрифт из дистрибутива XFree86
(директория <TT>xc/fonts/bdf/*/</TT>), в него добавляются кириллические и
иные отсутствующие символы (основные русские -- в позициях <FONT FACE="arial, helvetica">koi8</FONT>,
остальные -- в сравнительно произвольно выбранных позициях в диапазоне
<I>0x80-0x9F</I>; эта кодировка именуется "source encoding"). Шрифты
редактируются при помощи слегка модифицированного редактора  XmBDFEd
версии 3.0 (иногда используется помощь редактора XPaint).

<P>Затем специальная программа-сборщик, написанная на языке Perl
(<TT>cvtbdf.pl</TT>) считывает файлы, содержащие шрифт с кириллическими
символами и исходный ISO8859-1, и создает файл, содержащий шрифт в
указанной кодировке (<FONT FACE="arial, helvetica">koi8-1</FONT>, <FONT FACE="arial, helvetica">windows-1251</FONT> и т.д.).

<P>Поскольку XmBDFEd 3.0 не очень хорошо обращается с заголовками
некоторых шрифтов, то заголовки (а также параметр <TT>DWIDTH</TT> для
моноширинных шрифтов) берутся из ISO8859-1-шрифта.  При этом
модифицируется заголовок "<TT>FONT</TT>", заменяются значения свойств
<TT>FNDRY</TT>, <TT>CHARSET_REGISTRY</TT> и <TT>CHARSET_ENCODING</TT>.
Кроме того, добавляются свойства <TT>COPYRIGHT2</TT>, <TT>SOURCEDATE</TT>
и <TT>ASSEMBLER</TT>. 


<A NAME="S_1.14"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.14.&nbsp;По каким принципам создаются кириллические символы в CYR-RFX?</FONT></H3>

<P>Подробно это описано в &sect;3, но если в нескольких словах, то
<I>символы должны максимально соответствовать стилю шрифта</I>.



<A NAME="S_1.15"><BR CLEAR=all><H3 ALIGN=left><FONT FACE="lucida, verdana, arial, helvetica">&sect;1.15.&nbsp;Почему ВЫ занимаетесь кириллизацией?  Вы специалист по шрифтам?</FONT></H3>

<P>Дело в том, что я попросту устал от весьма "корявых" и
неэргономичных шрифтов, не говоря уж об их неэстетичности.  Поскольку
явно никто не чесался исправить ситуацию, то я решил заняться этим сам.

<P>Созданием/кириллизацией растровых шрифтов я начал заниматься еще в
80-х годах на компьютерах БК-0010, Yamaha MSX и AT286, так что опыт
давал мне право надеяться на получение качественного результата.




<BR CLEAR=all><HR WIDTH=90% SIZE=4>
<A NAME="S_2"><BR CLEAR=all><H2 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;2.&nbsp;Использование шрифтов CYR-RFX в приложениях</FONT></H2>
Надо написАть...
<BR CLEAR=all><HR WIDTH=90% SIZE=4>
<A NAME="S_3"><BR CLEAR=all><H2 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;3.&nbsp;Принципы создания кириллических символов в CYR-RFX</FONT></H2>
<P>Хотя в Internet есть довольно много рекомендаций по созданию
компьютерных шрифтов для языков на основе латиницы (см. например
[<A HREF="#bib_MSCDS]">MSCDS]</A>, рекомендации по созданию или кириллизации шрифтов
отсутствуют.  (Впрочем, существуют общие работы по добавлению
нелатинских символов в шрифты -- к примеру, [<A HREF="#bib_BH_DOUF">BH_DOUF</A>],
[<A HREF="#bib_6X13README">6X13README</A>].) Поэтому автор постарался сформулировать
правила, используемые им в проекте CYR-RFX.

<P>Автор не является экспертом по дизайну и созданию шрифтов, поэтому
всю нижеприведенную информацию следует рассматривать лишь как личный
опыт самого автора.

<HR WIDTH=50% SIZE=1 NOSHADE>
Создание шрифта есть акт искусства, и как художник уделяет внимание
мельчайшим деталям, так и при создании нового шрифта его автор как бы
рисует в голове "полную картину" этого шрифта, чтобы все символы
соответствовали единому стилю (в чуть меньшей степени это относится к
шрифтам <TT>misc/</TT>, которые ведут свою историю от алфавитно-цифровых
дисплеев и принтеров, где зачастую шрифты делались не профессионалами,
а теми, кто "оказывался под рукой").

<P>При добавлении же новых символов в чужой шрифт очень важно
попытаться восстановить эту "картину", чтобы добавляемые символы
соответствовали тому же стилю (аналогично тому, как должны
"проникнуться духом" картины реставраторы и изготовители подделок ;).

<P>Большинство символов состоят из более-менее стандартных элементов --
к примеру, левая вертикальная черта в "k" и "h" практически всегда
одинакова (включая серифы).  Поэтому пол-задачи -- "разглядеть" эти
стандартные элементы и правильно их использовать при создании
кириллических символов.  Значительно помогает также то, что кириллица
весьма близка к латинице (по крайней мере, существенно ближе, чем
иврит).

<P>Но некоторые кириллические символы или не имеют никаких близких
аналогов в <FONT FACE="arial, helvetica">ISO8859-1</FONT> (например, "д" и "л"), или же содержат
элементы, или совсем отсутствующие в <FONT FACE="arial, helvetica">ISO8859-1</FONT> (к примеру,
хвостик у "б"), или имеющие лишь отдаленные аналоги (как хвостики у
"д", "ц", "щ", "ъ").

<P>В последнем случае следует искать похожий по стилю и "духу" шрифт
среди кириллических "старых", т.е. использовавшихся в книгопечатании
еще в докомпьютерную эпоху, или же (особенно если это новый шрифт,
например, Lucida), попытавшись воссоздать "картину" шрифта, создать
новый элемент так, чтобы он органично вписался в шрифт.

<P>В случае CYR-RFX задача существенно упрощается тем, что требуется
кириллизировать лишь растровые шрифты размером от 8 до 24.  Тем не
менее, даже в сравнительно небольшой матрице можно создать несколько
совершенно различных стилей букв -- см., к примеру, обсуждение символов
"д" и "л".

<P>Кроме того, небольшая матрица накладывает свои ограничения, так что
приходится жертвовать "канонической" формой символа, чтобы сохранить
"впечатление" создаваемое его образом (чаще всего этому подвержена
буква "Ж"), или чтобы сохранить его "отличительность" <!--!!!--->
(например, буква "л" в шрифте <TT>75dpi/timR10</TT>).

<P>Ко всему прочему, кириллица хоть и похожа на латиницу, но имеет два
существенных "статистических" отличия.

<UL>

<LI>Во-первых, по числу символов с большим количеством "циклов"
(см.[<A HREF="#bib_BH_DOUF">BH_DOUF</A>, &sect;3, "Proportional and fixed-pitch
spacing"]) -- в основном за счет "ж", "ф", "ы", "ш", "щ" и "ю".  Это
сильно влияет на дизайн моноширинных шрифтов.

<LI>Во-вторых, по числу символов, имеющих одну или две вертикальных
границы.  Так, в английском их число 8 и 5 из 27 (30% и 19%, в сумме
меньше половины), а в русском -- 10 и 9 из 33 (30% и 27%, в сумме
больше половины), статистика приведена для маленьких букв.  Если же
учитывать частоту использования символов, то процент "полностью
вертикальных боков" букв, стоящих в тексте впритык, оказывается очень
высок.  Вследствие этого зачастую оказывается недостаточно просто
сделать все символы по тем же правилам, что и латинские -- надо также
уделять внимание сочетаемости букв.  Если в большинстве шрифтов эта
проблема решается (в основном путем изменения правил создания пустого
места по бокам букв), то с Lucida успех оказался весьма ограниченным
(видимо, вследствие очень тонкой проработки этой гарнитуры
[<A HREF="#bib_LUCIDA_FO">LUCIDA_FO</A>]).

</UL>

<P>Эти факторы приводят к тому, что, к примеру, русский текст выглядит
более "насыщенным", чем английский.  Поэтому "одинаковость" внешнего
вида следует воспринимать как цель, к которой надо стремиться, но едва
ли возможно достичь.  (По крайней мере, в рамках формата BDF, не
поддерживающего кернинг.)



<P>Ниже приведены соображения по созданию и использованию как элементов,
составляющих кириллические символы, так и отдельных символов.


<A NAME="S_3.1"><BR CLEAR=all><H3 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;3.1.&nbsp;Символы, идентичные существующим латинским</FONT></H3>

<P>Некоторые кириллические символы являются точными копиями латинских
символов, и поэтому они берутся из шрифта <FONT FACE="arial, helvetica">ISO8859-1</FONT> как есть. 
Русские символы (т.е. из диапазона
<FONT FACE="arial, helvetica">koi8</FONT>:<I>0xC0-0xFF</I>/<FONT FACE="arial, helvetica">Unicode</FONT>:<I>0410-044F</I>)
копируются при редактировании, а остальные -- при генерации шрифта
программой <TT>cvtbdf.pl</TT>.


<CENTER>
<TABLE BORDER=0 CELLSPACING=2 CELLPADDING=4>
<TR VALIGN=top BGCOLOR=#B0B0B0><TH COLSPAN=3>Символы</TH><TH COLSPAN=2>Копируются из</TH></TR>
<TR VALIGN=top BGCOLOR=#B0B0B0><TH>C</TH><TH>afii</TH><TH>U+..</TH><TH>Символ</TH><TH>ISO8859-1</TH></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TH COLSPAN=5>Русские символы</TH></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>А</TD><TD>10017</TD><TD>0410</TD><TD>A</TD><TD>0x41</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>В</TD><TD>10019</TD><TD>0412</TD><TD>B</TD><TD>0x42</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>Е</TD><TD>10022</TD><TD>0415</TD><TD>E</TD><TD>0x45</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>К</TD><TD>10028</TD><TD>041A</TD><TD>K</TD><TD>0x4B</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>Н</TD><TD>10031</TD><TD>041D</TD><TD>H</TD><TD>0x48</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>О</TD><TD>10032</TD><TD>041E</TD><TD>O</TD><TD>0x4F</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>Р</TD><TD>10034</TD><TD>0420</TD><TD>P</TD><TD>0x50</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>С</TD><TD>10035</TD><TD>0421</TD><TD>C</TD><TD>0x43</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>Т</TD><TD>10036</TD><TD>0422</TD><TD>T</TD><TD>0x54</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>Х</TD><TD>10039</TD><TD>0425</TD><TD>X</TD><TD>0x58</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>Ё</TD><TD>10023</TD><TD>0401</TD><TD>Edieresis</TD><TD>0xCB</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>а</TD><TD>10065</TD><TD>0430</TD><TD>a</TD><TD>0x61</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>е</TD><TD>10070</TD><TD>0435</TD><TD>e</TD><TD>0x65</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>о</TD><TD>10080</TD><TD>043E</TD><TD>o</TD><TD>0x6F</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>р</TD><TD>10082</TD><TD>0440</TD><TD>p</TD><TD>0x70</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>с</TD><TD>10083</TD><TD>0441</TD><TD>c</TD><TD>0x63</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>у</TD><TD>10085</TD><TD>0443</TD><TD>y</TD><TD>0x79</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>х</TD><TD>10087</TD><TD>0445</TD><TD>x</TD><TD>0x78</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>ё</TD><TD>10071</TD><TD>0451</TD><TD>edieresis</TD><TD>0xEB</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TH COLSPAN=5>Символы из WGL4</TH></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>S</TD><TD>10054</TD><TD>0405</TD><TD>S</TD><TD>0x53</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>I</TD><TD>10055</TD><TD>0406</TD><TD>I</TD><TD>0x49</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>I:</TD><TD>10056</TD><TD>0407</TD><TD>Idieresis</TD><TD>0xCF</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>J</TD><TD>10057</TD><TD>0408</TD><TD>J</TD><TD>0x4A</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>s</TD><TD>10102</TD><TD>0455</TD><TD>s</TD><TD>0x73</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>i</TD><TD>10103</TD><TD>0456</TD><TD>i</TD><TD>0x69</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>i:</TD><TD>10104</TD><TD>0457</TD><TD>idieresis</TD><TD>0xEF</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>j</TD><TD>10105</TD><TD>0458</TD><TD>j</TD><TD>0x6A</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TH COLSPAN=5>Остальные символы из Unicode</TH></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>&nbsp;</TD><TD>&nbsp;</TD><TD>04AA</TD><TD>Ccedilla</TD><TD>0xC7</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>&nbsp;</TD><TD>&nbsp;</TD><TD>04AB</TD><TD>ccedilla</TD><TD>0xE7</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>&nbsp;</TD><TD>&nbsp;</TD><TD>04AE</TD><TD>Y</TD><TD>0x59</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>&nbsp;</TD><TD>&nbsp;</TD><TD>04E6</TD><TD>Odieresis</TD><TD>0xD6</TD></TR>
<TR VALIGN=top BGCOLOR=#D0D0D0><TD>&nbsp;</TD><TD>&nbsp;</TD><TD>04E7</TD><TD>odieresis</TD><TD>0xF6</TD></TR>
</TABLE>
</CENTER>

<A NAME="S_3.2"><BR CLEAR=all><H3 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;3.2.&nbsp;Общие элементы и группы символов</FONT></H3>

<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;3.2.1.&nbsp;Псевдографика из диапазона 0x00-0x1F</FONT></H4>

<P>Все эти символы изготавливаются на основе символа <I>0x0F</I>
<TT>ldcross</TT> путем удаления лишних элементов.

<P>Сам символ <TT>ldcross</TT> получается путем наложения символов
<TT>minus</TT> и <TT>bar</TT> и продолжения их линий до границ клетки
символа.  Такое решение наилучшим образом удовлетворяет потребности
программ, которые используют псевдографические и "квазиграфические" (+,
-, |) символы вперемежку, например, talk.


<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;3.2.2.&nbsp;Буквы "д" и "л"</FONT></H4>

<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">1.&nbsp;Бессерифовые шрифты</FONT></H4>

<TABLE BGCOLOR=#000000 BORDER=0 CELLSPACING=0 CELLPADDING=1 ALIGN=left HSPACE=10 VSPACE=1>
<TR><TD><TABLE BGCOLOR=#FFFFFF BORDER=0 CELLSPACING=0 CELLPADDING=2>
<TR><TD><FONT SIZE=-1><PRE>
 ........ ........ ........ ......... ........
 ..####.. ...###.. ...###.. ....#.... .....#..
 ..#..#.. ..#..#.. ...#.#.. ...#.#... ....##..
 ..#..#.. ..#..#.. ...#.#.. ...#.#... ...#.#..
 ..#..#.. ..#..#.. ..#..#.. ..#...#.. ..#..#..
_.######._.######._.######._.#######._.######._
 .#....#. .#....#. .#....#. .#.....#. .#....#.
 ........ ........ ........ ......... ........
    a        b        c        d         e

 ........ ........ ........ ......... ........
 ..####.. ...###.. ...###.. ....#.... .....#..
 ..#..#.. ..#..#.. ...#.#.. ...#.#... ....##..
 ..#..#.. ..#..#.. ...#.#.. ...#.#... ...#.#..
 ..#..#.. ..#..#.. ..#..#.. ..#...#.. ..#..#..
_.#...#.._.#...#.._.#...#.._..#...#.._.#...#.._
 ........ ........ ........ ......... ........
    a        b        c        d         e
</PRE></FONT></TD></TR>
<TR><TD BGCOLOR=#B0B0B0 ALIGN=center>Варианты букв "д" и "л"<BR>в бессерифовых шрифтах</TD></TR>
</TABLE></TD></TR>
</TABLE>

<P>Варианты <B>(a)-(c)</B> используются довольно часто.

<P><B>(d)</B>, казалось бы, является результатом простодушного
получения "л" путем вертикального отображения "v" или удаления
перекладины у "A".  Но именно этот вариант исторически наиболее
правильный -- ведь кириллица делалась на основе греческого алфавита, а
"д" и "л" происходят от греческих "дельты" и "лямбды".  Этот вариант
широко применяется в современных шрифтах, и он рассматривался как
кандидат для Lucida.


<P><B>(e)</B> же -- типичный пример бессистемного подхода к
кириллизации шрифта (в принципе такое начертание иногда применяется в
декоративных шрифтах, к примеру, в Baskerville [<A HREF="#bib_BASK_C">BASK_C</A>], но
оно совершенно неприемлемо в Times, Helvetica и подобных).

<P>В шрифтах Lucida и LucidaTypewriter используется вариант (a) (он
получил предпочтение перед (d) в основном в силу его выбора авторами
семейства шрифтов Lucida [<A HREF="#bib_BH_DOUF">BH_DOUF</A>,Figure1]).

<P>В шрифтах <TT>misc/</TT> используется (b) в силу того, что этот вариант
был наиболее распространен в моноширинных кириллических шрифтах еще в
эпоху ЭВМ ЕС, PDP-11, MSX и подобных.

<P>В шрифте Helvetica применяется "комбинация" из (a) и (c): в шрифтах
малого размера -- (a), который с увеличением размера "плавно переходит"
в (c).


<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">1.&nbsp;Шрифты с серифами</FONT></H4>

<TABLE BGCOLOR=#000000 BORDER=0 CELLSPACING=0 CELLPADDING=1 ALIGN=left HSPACE=10 VSPACE=1>
<TR><TD><TABLE BGCOLOR=#FFFFFF BORDER=0 CELLSPACING=0 CELLPADDING=2>
<TR><TD><FONT SIZE=-1><PRE>
 ......... .........
 ..######. ..###....
 ...#..#.. ...#.#...
 ...#..#.. ...#.#...
 ..#...#.. ..#...#..
_.#######._.#######._
 .#.....#. .#.....#.
 ......... .........
     a         b

 ......... .........
 ..######. ..###....
 ...#..#.. ...#.#...
 ...#..#.. ...#.#...
 .#.#..#.. ..#...#..
_..#..###._.###.###._
 ......... .........
</PRE></FONT></TD></TR>
<TR><TD BGCOLOR=#B0B0B0 ALIGN=center>Варианты букв "д" и "л"<BR>в шрифтах с серифами</TD></TR>
</TABLE></TD></TR>
</TABLE>

<P>Реально рассматривались лишь два варианта.  Поскольку в
Times-подобных шрифтах издавна применяется (a), то он и был выбран для
Times.

<P>Для Courier вполне подходящим был бы вариант (b), при котором "Л"
получается путем удаления горизонтальной черты у "А".  Но, поскольку
установилась практика, что Courier -- это шрифт, используемый взамен
того, что применялся на пишущих машинках (каковым был вариант (a)),
то для Courier также был выбран вариант (a).


<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;3.2.3.&nbsp;Заглавные буквы с акцентами</FONT></H4>

<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">1.&nbsp;Общие соображения</FONT></H4>

<P>Акценты обычно занимают значительное место сверху символа, поэтому 
такие буквы в некоторых шрифтах <FONT FACE="arial, helvetica">ISO8859-1</FONT> имеют существенно
меньшую высоту (особенно это касается шрифтов <TT>misc/</TT>).

<P>При создании кириллических букв с акцентами следует учитывать два
соображения. С одной стороны, вертикальные размеры всех заглавных букв
с акцентами должны быть по возможности одинаковыми.  С другой, для
удобства чтения высота букв с акцентами должна быть максимально
приближена к высоте букв без акцентов (в идеале акцент должен быть
целиком расположен сверху прямоугольника буквы, а начертания одинаковых
букв с акцентами и без должны совпадать).

<P>В качестве компромисса было выбрано следующее решение. 
Кириллические буквы с западными акцентами "acute" ("'"), "grave" ("`")
и т.п. имеют ту же высоту, что и буквы с акцентами из шрифта
<FONT FACE="arial, helvetica">ISO8859-1</FONT> (к примеру, <TT>Eacute</TT>).  Буквы же с акцентом
"краткости" -- "И краткое" и "У краткое" являются копиями букв "И" и
"У" соответственно, с высотой, уменьшенной в наименее возможной степени
(но одинаково для обоих этих символов!).

<P>В шрифтах малого размера, когда европейские символы с акцентами
реально акцентов не имеют (к примеру, в <TT>5x7.bdf</TT> символ
<TT>Eacute</TT> идентичен символу "E"), решение, делать ли акцент (или
символ будет копией такого же без акцента) принимается в каждом
конкретном случае отдельно, но по возможности акцент делается.

<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">2.&nbsp;Акцент "краткости"</FONT></H4>

<P>Акцент "краткости" в русском языке вообще несколько отличается по
статусу от акцентов в европейских языках.  Дело в том, что, если в
европейских языках одна и та же буква (например, "a") может в принципе
иметь множество разных акцентов (grave, acute, circumflex, caron,
tilde, umlaut/dieresis, dot, ring и т.д.), то над "и" в русском,
украинском и беларусском языках может быть один-единственный акцент
"краткости" -- breve.  Как следствие, сложилась практика, когда для
отличия "и краткого" от "и" достаточно просто <I>любого</I> значка.  На
рисунке приведено несколько самых часто встречающихся примеров.

<TABLE BGCOLOR=#000000 BORDER=0 CELLSPACING=0 CELLPADDING=1 ALIGN=left HSPACE=10 VSPACE=1>
<TR><TD><TABLE BGCOLOR=#FFFFFF BORDER=0 CELLSPACING=0 CELLPADDING=2>
<TR><TD><FONT SIZE=-1><PRE>
 ....... ....... ....... ....... .......
 .#...#. ..#.#.. ....... ....... ....#..
 ..###.. ...#... ..###.. ...#... ...#...
 ....... ....... ....... ....... .......
 .#...#. .#...#. .#...#. .#...#. .#...#.
 .#..##. .#..##. .#..##. .#..##. .#..##.
 .#.#.#. .#.#.#. .#.#.#. .#.#.#. .#.#.#.
 .##..#. .##..#. .##..#. .##..#. .##..#.
_.#...#._.#...#._.#...#._.#...#._.#...#._
 ....... ....... ....... ....... .......
  breve   caron   macron   dot    acute
</PRE></FONT></TD></TR>
<TR><TD BGCOLOR=#B0B0B0 ALIGN=center>Варианты буквы "и краткое"</TD></TR>
</TABLE></TD></TR>
</TABLE>

<P>Акцент "breve" является наиболее предпочтительным, но корректное его
отображение при малом разрешении весьма затруднено -- такое
"закругление" занимает слишком много места и выглядит слишком
гипертрофированным (зачастую этим страдают шрифты, для создателей
которых кириллица не является родным алфавитом).

<TABLE BGCOLOR=#000000 BORDER=0 CELLSPACING=0 CELLPADDING=1 ALIGN=right HSPACE=10 VSPACE=1>
<TR><TD><TABLE BGCOLOR=#FFFFFF BORDER=0 CELLSPACING=0 CELLPADDING=2>
<TR><TD><FONT SIZE=-1><PRE>
 ........ ........
 .##..##. ........
 .##..##. .##...#.
 .#....#. .##..#..
 ..####.. ..###...
 ........ ........
  roman    italic
</PRE></FONT></TD></TR>
<TR><TD BGCOLOR=#B0B0B0 ALIGN=center>Варианты акцента для<BR>Times-шрифтов</TD></TR>
</TABLE></TD></TR>
</TABLE>

<P>В Times-подобных шрифтах этот акцент может выглядеть не просто как
закругление, а как "соединенные хвостиками запятые".

<P>"caron" может быть или маленьким вариантом "breve", или же
"галочкой", отличающей "и краткое" от "и".

<P>"macron" используется также или как уменьшенный вариант "breve"
("хвостики" как бы столь малы, что не видны), или как "значок" для
отличия от "и".

<P>"dot" применяется крайне редко, в основном, для символов очень
малого размера, когда этот акцент может рассматриваться в качестве
максимально уменьшенного варианта <I>любого</I> акцента.

<P>И, наконец, "acute" применяется крайне редко (в основном в
рукописных текстах). Этот вариант свидетельствует скорее о небрежности
его использующего, т.к. обычно "acute" используется в качестве акцента
"ударения", т.е. "и+acute" -- это "и, на которое падает ударение".

<P>В CYR-RFX используется "breve" как наиболее правильный, за следующими
исключениями шрифтов малого размера.

<OL>

<LI> В шрифтах <TT>misc/</TT> (за исключением times-подобных <TT>8x16</TT> и
<TT>12x24</TT>) применяется "macron".

<LI> В Lucida и LucidaTypewriter размера 12 и ниже, Times и Courier
размера 10 и ниже применяется "macron", а в некоторых случаях --
"caron".

</OL>

<P>Использование "caron" в качестве уменьшенного "breve" совершенно
безвредно, т.к. в кириллических символах "caron" не применяется вовсе.

<P>При применении же "macron" учитывается то, что он, с одной стороны,
применяется в "простых" шрифтах в русском, украинском и беларусском
языках де-факто, а с другой стороны -- единственный случай, когда могла
бы возникнуть визуальная неопределенность -- таджикские буквы
"и+macron" и "у+macron" (<TT>U+04E2/U+04E3</TT>, <TT>U+04EE/U+04EF</TT>)
[<A HREF="#bib_PISKA">PISKA</A>].  Причем, поскольку "у+breve" в таджикском
отсутствует, то остается лишь "и+breve"&lt;-&gt;"и+macron".  Так как эти
символы не входят в основной набор, поддерживаемый CYR-RFX, то
неопределенностью было решено пренебречь. <SMALL><I>(В тех шрифтах,
которые содержат более полный набор символов U0400, имеются
дополнительные варианты "и+breve" и "у+breve", используемые в кодировке
<FONT FACE="arial, helvetica">iso10646-0400</FONT>.)</I></SMALL>

<P>Горизонтальная часть "breve", используемого в "и кратком", почти
всегда имеет ту же толщину, что и горизонтальные линии в символах. 
Таким образом, к примеру, в шрифтах <TT>courB{18,24}</TT> вид акцента в
"и кратком" отличается от символа "breve" (имеющегося в разделе
unencoded glyphs).  Такой подход позволяет добиться более "целостного"
вида шрифта.

<PRE>
НАПОМИНАНИЕ: 1. а "ЙО"?
             2. упомянуть "Гupturn"
</PRE>


<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;3.2.4.&nbsp;Нижние выступы у букв "Д", "Ц", "Щ" и подобных</FONT></H4>

<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;3.2.5.&nbsp;Вертикальная черта при "К" и "Ч"</FONT></H4>

<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;3.2.6.&nbsp;"Крючок" при "Г", "П" и "К"</FONT></H4>

<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;3.2.7.&nbsp;Двухбуквенные лигатуры "НЬ", "ЛЬ" и подобные</FONT></H4>


<A NAME="S_3.3"><BR CLEAR=all><H3 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&sect;3.3.&nbsp;Отдельные символы</FONT></H3>


<P>Русские символы упорядочены по алфавиту, остальные идут за ними в
порядке заглавных букв кодировки Unicode.  Строчная буква (если есть и
отдельно от заглавной) идет сразу после заглавной.

<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&nbsp;"DJE":0402:afii10051, "dje":0452:afii10099</FONT></H4>

<P>Данные символы получались из "TSHE":<I>040B</I> и "tshe":<I>045B</I>
соответственно путем "заворота" конца правой нижней линии влево.

<P>В разных гарнитурах конец правой "кривой" у "DJE" может или
располагаться на базовой линии (Computer Modern, Lucida, шрифты от
Microsoft) или же выступать вниз на то же расстояние, что и у "j"
(шрифт от Adobe, использованный в [<A HREF="#bib_5013">5013</A>]).

<P>В CYR-RFX в шрифтах Times (включая <TT>8x16</TT> и <TT>12x24</TT>) он
сделан выступающим вниз по образцу Adobe, а в остальных -- на базовой
линии.


<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&nbsp;"НЬ":040A:afii10059, "нь":045A:afii10107</FONT></H4>

<TABLE BGCOLOR=#000000 BORDER=0 CELLSPACING=0 CELLPADDING=1 ALIGN=left HSPACE=10 VSPACE=1>
<TR><TD><TABLE BGCOLOR=#FFFFFF BORDER=0 CELLSPACING=0 CELLPADDING=2>
<TR><TD><FONT SIZE=-1><PRE>
 .......   .......    .......
 .#...#.   .#.....    .#.#...
 .#...#.   .#.....    .#.#...
 .#...#.   .####..    .####..
 .#####. + .#...#. -> .#.#.#.
 .#...#.   .#...#.    .#.#.#.
 .#...#.   .#...#.    .#.#.#.
 .#...#.   .####..    .#.##..
 .......   .......    .......
</PRE></FONT></TD></TR>
<TR><TD BGCOLOR=#B0B0B0 ALIGN=center>Создание "НЬ"</TD></TR>
</TABLE></TD></TR>
</TABLE>

<P>Интересная проблема возникает при создании символов "НЬ" и "нь". 
Казалось бы, следует просто "слить" начертания "Н" и "Ь", чтобы правая
вертикальная линия "Н" совпала с левой вертикальной от "Ь".  Но
горизонтальная линия в "Н" может быть расположена на иной высоте, чем
верхняя линия закругления в "Ь" (обычно ниже; пример --
<TT>10x20.bdf</TT>), а в "НЬ" они должны образовывать единую линию. 
Наилучшим выходом представляется перенос линии в "Н" на ту же высоту,
что и в "Ь".


<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&nbsp;"DZHE":040F:afii10145, "dzhe":045F:afii10193</FONT></H4>

<P>Данные символы получаются путем вертикального отображения символов
"П"/"п" и добавления выступа снизу по центру.  Если символ имеет четную
ширину, а толщина линий -- нечетная (medium-шрифты, к примеру,
<TT>7x13.bdf</TT>), или же символ имеет нечетную ширину, а толщина линий
-- четная (например, <TT>8x13B.bdf</TT>), то выступ смещается вправо.

<P>Кроме того, в малых шрифтах, когда размер выступа у букв "ц" и "щ"
-- 1 пиксел, а вертикальная линия в букве "p" выступает вниз от базовой
линии на 2 пиксела, то для заметности размер выступа у "DZHE/dzhe" -- 2
пиксела.


<BR CLEAR=all><H4 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&nbsp;"ЯТЬ":0462:afii10146, "ять":0463:afii10194</FONT></H4>

<P>Эти символы получаются из "Ъ"/"ъ".

<P>У заглавной буквы просто добавляется горизонтальная черта примерно
на середине выступающей вверх линии, а "хвостик" от "Ъ" удаляется
(заменяясь обычной небольшой чертой у серифовых шрифтов).

<P>У строчной буквы вертикальная линия вытягивается до такой же высоты,
как у "b".  Затем добавляется горизонтальная черта на высоте x-height
(т.е. там же, где и у "ъ", только в обе стороны).



<BR CLEAR=all><HR WIDTH=90% SIZE=4>







<A NAME="S_BIBL"><BR CLEAR=all><H2 ALIGN=center><FONT FACE="lucida, verdana, arial, helvetica">&nbsp;Литература</FONT></H2>
<DL>

<DT><P><A NAME="bib_5013"><B>[5013]</B>
  <DD>Adobe Systems Incorporated, "Adobe Standard Cyrillic Font Specification, Technical Note #5013, 25 February 1993.
  <BR><A HREF=ftp://ftp.adobe.com/pub/adobe/devrelations/devtechnotes/pdffiles/5013.cyrillic_font_spec.pdf>ftp://ftp.adobe.com/pub/adobe/devrelations/devtechnotes/pdffiles/5013.cyrillic_font_spec.pdf</A>

<DT><P><A NAME="bib_6X13README"><B>[6X13README]</B>
  <DD>Markus Kuhn, 6x13 project README file, "CONTRIBUTING" section.
  <BR><A HREF=http://www.cl.cam.ac.uk/~mgk25/download/ucs-fonts.tar.gz>http://www.cl.cam.ac.uk/~mgk25/download/ucs-fonts.tar.gz</A>
  <TT>/README</TT>

<DT><P><A NAME="bib_75DPI_KOI8"><B>[75DPI_KOI8]</B>
  <DD>Unknown author, Collection of 75 dpi russian fonts in BDF format, 1991.
  <BR><A HREF=http://www.kiarchive.ru/pub/cyrillic/x11/fonts/75dpi_koi8.tar.gz>http://www.kiarchive.ru/pub/cyrillic/x11/fonts/75dpi_koi8.tar.gz</A>

<DT><P><A NAME="bib_ACHE"><B>[ACHE]</B>
  <DD>А. Чернов, "KOI8-R - Русская Сетевая Кодировка".
  <BR><A HREF=http://nagual.pp.ru/~ache/koi8.html>http://nagual.pp.ru/~ache/koi8.html</A>

<DT><P><A NAME="bib_AGL"><B>[AGL]</B>
  <DD>Adobe Systems Incorporated, "Adobe Glyph List" version 1.2, 22 Oct 1998.
  <BR><A HREF=http://partners.adobe.com/asn/developer/typeforum/glyphlist.txt>http://partners.adobe.com/asn/developer/typeforum/glyphlist.txt</A>

<DT><P><A NAME="bib_ATYPE"><B>[ATYPE]</B>
  <DD>Adobe Systems Incorporated, "Adobe Type Library".
  <BR><A HREF=http://www.adobe.com/type/>http://www.adobe.com/type/</A>

<DT><P><A NAME="bib_BASK_C"><B>[BASK_C]</B>
  <DD>Linotype-Hell AG, Baskerville Cyrillic font.
  <BR><A HREF=http://www.adobe.com/type/browser/P/P_365.html>http://www.adobe.com/type/browser/P/P_365.html</A>
  <BR>([ATYPE] -> A-Z type index -> B -> Baskerville Cyrillic)

<DT><P><A NAME="bib_BDF"><B>[BDF]</B>
  <DD>Adobe Systems Incorporated, "Glyph Bitmap Distribution Format &#40;BDF&#41; Specification", Version 2.2, 22 March 1993.
  <BR><A HREF=ftp://ftp.adobe.com/pub/adobe/devrelations/devtechnotes/pdffiles/5005.bdf_spec.pdf>ftp://ftp.adobe.com/pub/adobe/devrelations/devtechnotes/pdffiles/5005.bdf_spec.pdf</A>

<DT><P><A NAME="bib_BH_DOUF"><B>[BH_DOUF]</B>
  <DD>C.Bigelow, K.Holmes, "The Design of a Unicode Font", Electronic Publishing, vol. 6&#40;3&#41;, 289-305 &#40;September 1993&#41.
  <BR><A HREF=http://cajun.cs.nott.ac.uk/wiley/journals/epobetan/pdf/volume6/issue3/bigelow.pdf>http://cajun.cs.nott.ac.uk/wiley/journals/epobetan/pdf/volume6/issue3/bigelow.pdf</A>

<DT><P><A NAME="bib_CRONYX"><B>[CRONYX]</B>
  <DD>Cronyx Ltd., "Fonts mostly in BDF format".
  <BR><A HREF=http://www.kiarchive.ru/pub/cyrillic/x11/fonts/>http://www.kiarchive.ru/pub/cyrillic/x11/fonts/</A>
  <BR><A HREF=ftp://ftp.kiarchive.ru/pub/cyrillic/x11/fonts/>ftp://ftp.kiarchive.ru/pub/cyrillic/x11/fonts/</A>
<BR>(см. также файл <TT>README.set</TT>)

<DT><P><A NAME="bib_CZY_CP1252"><B>[CZY_CP1252]</B>
  <DD>Roman Czyborra, "The ISO 8859 Alphabet Soup", 1998-12-01.
  <BR><A HREF=http://czyborra.com/charsets/iso8859.html#CP1252>http://czyborra.com/charsets/iso8859.html#CP1252</A>

<DT><P><A NAME="bib_CZY_CYR"><B>[CZY_CYR]</B>
  <DD>Roman Czyborra, "The Cyrillic Charset Soup", 1998-11-30.
  <BR><A HREF=http://czyborra.com/charsets/cyrillic.html>http://czyborra.com/charsets/cyrillic.html</A>

<DT><P><A NAME="bib_EURO_A"><B>[EURO_A]</B>
  <DD>Ingrid Kelly, "The Euro Currency Symbol", Technote 1140, Apple Worldwide Developer Technical Support, 05-October-98.
  <BR><A HREF=http://developer.apple.com/technotes/tn/tn1140.html>http://developer.apple.com/technotes/tn/tn1140.html</A>

<DT><P><A NAME="bib_EURO_H"><B>[EURO_H]</B>
  <DD>Hewlett Packard, "Design and development of the Euro symbol for HPFontSmart".
  <BR><A HREF=http://www.fonts.com/hp/euro/Eurodev1.htm>http://www.fonts.com/hp/euro/Eurodev1.htm</A>

<DT><P><A NAME="bib_EURO_M"><B>[EURO_M]</B>
  <DD>Microsoft Corporation, "The euro currency symbol", 23 February 1999.
  <BR><A HREF=http://www.microsoft.com/typography/faq/faq12.htm>http://www.microsoft.com/typography/faq/faq12.htm</A>

<DT><P><A NAME="bib_HELV_C"><B>[HELV_C]</B>
  <DD>Linotype-Hell AG, Helvetica Cyrillic font.
  <BR><A HREF=http://www.adobe.com/type/browser/P/P_361.html>http://www.adobe.com/type/browser/P/P_361.html</A>
  <BR>([ATYPE] -> A-Z type index -> H -> Helvetica Cyrillic)

<DT><P><A NAME="bib_KOI81"><B>[KOI81]</B>
  <DD>Е.Бырганов, "Описание кодировки для работы в среде X11 на русском языке", 28.10.1999.
  <BR><A HREF=http://www.inp.nsk.su/~byrganov/publish/koi8-1/koi8-1.ru.html>http://www.inp.nsk.su/~byrganov/publish/koi8-1/koi8-1.ru.html</A>

<DT><P><A NAME="bib_KOI8R"><B>[KOI8R]</B>
  <DD>A. Chernov, "Registration of a Cyrillic Character Set", RFC1489, July 1993.
  <BR><A HREF=ftp://ftp.isi.edu/in-notes/rfc1489.txt>ftp://ftp.isi.edu/in-notes/rfc1489.txt</A>

<DT><P><A NAME="bib_KOI8RU"><B>[KOI8RU]</B>
  <DD>Yuri Demchenko, "KOI8-RU - Ukrainian Net Character Set".
  <BR><A HREF=http://cad.ntu-kpi.kiev.ua/multiling/koi8-ru/>http://cad.ntu-kpi.kiev.ua/multiling/koi8-ru/</A>

<DT><P><A NAME="bib_KOI8U"><B>[KOI8U]</B>
  <DD>KOI8-U Working Group, "Ukrainian Character Set KOI8-U", RFC2319, April 1998.
  <BR><A HREF=ftp://ftp.isi.edu/in-notes/rfc2319.txt>ftp://ftp.isi.edu/in-notes/rfc2319.txt</A>
  <BR><A HREF=http://cad.ntu-kpi.kiev.ua/multiling/koi8-u/>http://cad.ntu-kpi.kiev.ua/multiling/koi8-u/</A>

<DT><P><A NAME="bib_LUCIDA_FO"><B>[LUCIDA_FO]</B>
  <DD>Compiled from Charles Bigelow and Kris Holmes works, "Lucida Family Overview".
  <BR><A HREF=http://members.aol.com/willadams/lucida.txt>http://members.aol.com/willadams/lucida.txt</A>
<BR>(Вероятно, лучшей работой является [Charles Bigelow and Kris Holmes, "The design of Lucida: an integrated family of types for electronic literacy", in <I>Text processing and document manipulation</I>, ed. J. C. Van Vliet, Cambridge University Press, &#40;1986&#41;], но у меня нет к ней доступа.)

<DT><P><A NAME="bib_MSCDS"><B>[MSCDS]</B>
  <DD>Microsoft Corporation, "Character design standards".
  <BR><A HREF=http://www.microsoft.com/typography/developers/fdsspec/default.htm>http://www.microsoft.com/typography/developers/fdsspec/default.htm</A>

<DT><P><A NAME="bib_MS_EULA"><B>[MS_EULA]</B>
  <DD>Microsoft Corporation, "TrueType core fonts for the Web EULA".
  <BR><A HREF=http://www.microsoft.com/typography/fontpack/eula.htm>http://www.microsoft.com/typography/fontpack/eula.htm</A>
  <BR><A HREF=http://www.microsoft.com/typography/faq/faq8.htm>http://www.microsoft.com/typography/faq/faq8.htm</A>
  <BR><A HREF=http://www.microsoft.com/Misc/cpyright.htm>http://www.microsoft.com/Misc/cpyright.htm</A>

<DT><P><A NAME="bib_MS_FONTPACK"><B>[MS_FONTPACK]</B>
  <DD>Microsoft Corporation, "TrueType core fonts for the Web".
  <BR><A HREF=http://www.microsoft.com/typography/fontpack/default.htm>http://www.microsoft.com/typography/fontpack/default.htm</A>

<DT><P><A NAME="bib_MUSAEV"><B>[MUSAEV]</B>
  <DD>К.М. Мусаев, "Алфавиты языков народов СССР", Москва, "Наука", 1965.

<DT><P><A NAME="bib_OFFTYPESANS"><B>[OFFTYPESANS]</B>
  <DD>D.Gulinov, Office TypeSans font.
  <BR><A HREF=http://www.paratype.com/library/newstyles.asp?fontcode=TM_OTS>http://www.paratype.com/library/newstyles.asp?fontcode=TM_OTS</A>

<DT><P><A NAME="bib_PISKA"><B>[PISKA]</B>
  <DD>Karel Piska, "Cyrillic Alphabets", TUGboat 17&#40;2&#41;, June 1996.
  <BR><A HREF=http://www.tug.org/TUGboat/Articles/tb17-2/tb51pisk.pdf>http://www.tug.org/TUGboat/Articles/tb17-2/tb51pisk.pdf</A>
  <BR><A HREF=http://www-hep.fzu.cz/~piska/>http://www-hep.fzu.cz/~piska/</A>

<DT><P><A NAME="bib_TIMES_C"><B>[TIMES_C]</B>
  <DD>Linotype-Hell AG, Times Ten Cyrillic font.
  <BR><A HREF=http://www.adobe.com/type/browser/P/P_354.html>http://www.adobe.com/type/browser/P/P_354.html</A>
  <BR>([ATYPE] -> A-Z type index -> T -> Times Ten Cyrillic)

<DT><P><A NAME="bib_U0400"><B>[U0400]</B>
  <DD>Unicode, Inc., Unicode 2.1 Cyrillic chart.
  <BR><A HREF=http://charts.unicode.org/Unicode.charts/normal/U0400.html>http://charts.unicode.org/Unicode.charts/normal/U0400.html</A>

<DT><P><A NAME="bib_UGN"><B>[UGN]</B>
  <DD>Adobe Systems Incorporated, "Unicode and Glyph Names" version 1.1, 17 December 1998.
  <BR><A HREF=http://partners.adobe.com/asn/developer/typeforum/unicodegn.html>http://partners.adobe.com/asn/developer/typeforum/unicodegn.html</A>

<DT><P><A NAME="bib_WIN1251"><B>[WIN1251]</B>
  <DD>Microsoft Corporation, "Microsoft Windows Codepage : 1251 &#40;Cyrillic&#41;".
  <BR><A HREF=http://www.microsoft.com/globaldev/reference/sbcs/1251.htm>http://www.microsoft.com/globaldev/reference/sbcs/1251.htm</A>

<DT><P><A NAME="bib_WGL4"><B>[WGL4]</B>
  <DD>Microsoft Corporation, "WGL4.0 Character Set".
  <BR><A HREF=http://www.microsoft.com/typography/OTSPEC/WGL4.htm>http://www.microsoft.com/typography/OTSPEC/WGL4.htm</A>

<DT><P><A NAME="bib_XLFD"><B>[XLFD]</B>
  <DD>Jim Flowers, "X Logical Font Description Conventions", Version 1.5, X Consortium Standard, X Version 11, Release 6.3.
  <BR><A HREF=ftp://ftp.x.org/pub/R6.4/xc/doc/hardcopy/XLFD/xlfd.PS.gz>ftp://ftp.x.org/pub/R6.4/xc/doc/hardcopy/XLFD/xlfd.PS.gz</A>

</DL>

<HR>
<P><CENTER><FONT SIZE="-2"><ADDRESS>&copy; 2000 <A HREF="mailto:bolkhov@inp.nsk.su">Дмитрий Болховитянов</A></ADDRESS></FONT></CENTER>
</BODY>
</HTML>
